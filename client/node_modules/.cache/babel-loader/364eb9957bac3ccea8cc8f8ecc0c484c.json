{"ast":null,"code":"import _slicedToArray from\"/Users/ajaykiranreddy/react/heroku/Server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Grid}from\"@material-ui/core\";import\"./snstyle.css\";import SNLandingPage from\"./SNLandingPage\";import{API_URL}from\"../../../reduxModules/constants\";import{connect}from\"react-redux\";import Button from\"@material-ui/core/Button\";import makeStyles from\"@material-ui/core/styles/makeStyles\";import EditIcon from'@material-ui/icons/Edit';import Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import DialogActions from\"@material-ui/core/DialogActions\";import Slide from\"@material-ui/core/Slide\";import TextField from\"@material-ui/core/TextField\";var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(1)}};});function Profile(props){var classes=useStyles();var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),myPostsData=_React$useState2[0],setMyPostsData=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),username=_React$useState6[0],setUserName=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),password=_React$useState8[0],setPassword=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),email=_React$useState10[0],setEmail=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),profilePic=_React$useState12[0],setProfilePic=_React$useState12[1];React.useEffect(function(){fetch(API_URL+\"/post/myPosts\",{method:\"GET\",headers:{\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(data){return setMyPostsData(data);});},[]);var handleEditProfile=function handleEditProfile(){setOpen(true);};var Transition=React.forwardRef(function Transition(props,ref){return/*#__PURE__*/React.createElement(Slide,Object.assign({direction:\"up\",ref:ref},props));});var handleClose=function handleClose(){setOpen(false);};var handlePhotoChange=function handlePhotoChange(e){setProfilePic(e.target.files[0]);};var handlePassword=function handlePassword(e){setPassword(e.target.value);};var handleUsername=function handleUsername(e){setUserName(e.target.value);};var handleEmailChange=function handleEmailChange(e){setEmail(e.target.value);};var SaveProfileDetails=function SaveProfileDetails(){var data=new FormData();data.append(\"file\",profilePic);data.append(\"upload_preset\",\"AjayUi\");data.append(\"cloud_name\",\"AjayUi\");fetch(\"https://api.cloudinary.com/v1_1/ajaui/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){return fetch(\"\".concat(API_URL,\"/auth/editProfile/\").concat(props.jwtToken.userDetails.user._id),{method:\"POST\",body:JSON.stringify({name:username,email:email,password:password,photo:data.url}),headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){return console.log(data,'final data');});});};return/*#__PURE__*/React.createElement(\"div\",null,open?/*#__PURE__*/React.createElement(Dialog,{open:open,TransitionComponent:Transition,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-slide-title\",\"aria-describedby\":\"alert-dialog-slide-description\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"alert-dialog-slide-title\"},\"Edit your profile\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:'400px'}},/*#__PURE__*/React.createElement(TextField,{style:{width:'100%'},id:\"standard-basic\",label:\"name\",value:username,onChange:handleUsername})),/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:'400px'}},/*#__PURE__*/React.createElement(TextField,{style:{width:'100%'},id:\"standard-basic\",label:\"email\",value:email,onChange:handleEmailChange})),/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:'400px'}},/*#__PURE__*/React.createElement(TextField,{style:{width:'100%'},id:\"standard-basic\",label:\"Password\",value:password,onChange:handlePassword,type:\"password\"})),/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"20px\",marginTop:\"2%\"}},/*#__PURE__*/React.createElement(\"input\",{id:\"files\",className:\"Input\",type:\"file\",onChange:function onChange(e){return handlePhotoChange(e);}}))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:SaveProfileDetails,color:\"primary\"},\"Save\"))):null,/*#__PURE__*/React.createElement(SNLandingPage,null),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:2}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:8},/*#__PURE__*/React.createElement(\"div\",{className:\"profileHeader\"},/*#__PURE__*/React.createElement(\"div\",{className:\"thumbnail\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},/*#__PURE__*/React.createElement(\"div\",{className:\"thumbnailDiv\"},/*#__PURE__*/React.createElement(\"img\",{src:myPostsData&&myPostsData.posts[0].postedBy.photo,className:\"thumbnailDiv\"}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:9},/*#__PURE__*/React.createElement(\"div\",{className:\"profileStats\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"profileName\"},myPostsData&&myPostsData.posts[0].postedBy.name),/*#__PURE__*/React.createElement(Button,{style:{marginTop:\"5%\",float:\"right\",width:\"200px\",height:\"50px\",marginLeft:\"2%\"},variant:\"contained\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(EditIcon,null),onClick:handleEditProfile},/*#__PURE__*/React.createElement(\"span\",{style:{width:\"200px\"}},\"Edit Profile\"))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,style:{textAlign:\"left\",width:\"50%\"}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeaders\"},\"Posts\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeaders\"},\"Followers\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeaders\"},\"Following\")),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,style:{textAlign:\"left\",width:\"50%\"}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeadersValues\"},myPostsData&&myPostsData.posts.length),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeadersValues\"},\"120\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4,className:\"subHeadersValues\"},\"3\")))))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,style:{marginTop:\"3%\",backgroundColor:\"#dae8e2\"}},myPostsData&&myPostsData.posts.map(function(post,index){return/*#__PURE__*/React.createElement(Grid,{key:index,item:true,xs:4},/*#__PURE__*/React.createElement(\"img\",{style:{padding:\"20px\",width:\"300px\",height:\"300px\"},src:post.photo}));}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:2})));}function mapStateToProps(state){return{jwtToken:state.accessToken};}export default connect(mapStateToProps)(Profile);","map":{"version":3,"sources":["/Users/ajaykiranreddy/react/heroku/Server/client/src/components/apps/socialNetwork/Profile.jsx"],"names":["React","Grid","SNLandingPage","API_URL","connect","Button","makeStyles","EditIcon","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Slide","TextField","useStyles","theme","button","margin","spacing","Profile","props","classes","useState","myPostsData","setMyPostsData","open","setOpen","username","setUserName","password","setPassword","email","setEmail","profilePic","setProfilePic","useEffect","fetch","method","headers","jwtToken","userDetails","accessToken","then","res","json","data","handleEditProfile","Transition","forwardRef","ref","handleClose","handlePhotoChange","e","target","files","handlePassword","value","handleUsername","handleEmailChange","SaveProfileDetails","FormData","append","body","user","_id","JSON","stringify","name","photo","url","console","log","minWidth","width","padding","marginTop","posts","postedBy","float","height","marginLeft","textAlign","length","backgroundColor","map","post","index","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Grid} from \"@material-ui/core\";\nimport \"./snstyle.css\";\nimport SNLandingPage from \"./SNLandingPage\";\nimport {API_URL} from \"../../../reduxModules/constants\";\nimport {connect} from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Slide from \"@material-ui/core/Slide\";\nimport TextField from \"@material-ui/core/TextField\";\n\nProfile.propTypes = {};\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        margin: theme.spacing(1),\n    },\n}));\n\nfunction Profile(props) {\n    const classes = useStyles();\n    const [myPostsData, setMyPostsData] = React.useState();\n    const [open, setOpen] = React.useState(false);\n    const [username, setUserName] = React.useState('');\n    const [password, setPassword] = React.useState('');\n    const [email, setEmail] = React.useState('');\n    const [profilePic, setProfilePic] = React.useState('');\n    \n    React.useEffect(() => {\n        fetch(API_URL + \"/post/myPosts\", {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(data => setMyPostsData(data))\n    }, []);\n    \n    const handleEditProfile = () => {\n        setOpen(true)\n    };\n    \n    const Transition = React.forwardRef(function Transition(props, ref) {\n        return <Slide direction=\"up\" ref={ref} {...props} />;\n    });\n    \n    \n    const handleClose = () => {\n        setOpen(false)\n    };\n    \n    const handlePhotoChange = (e) => {\n        setProfilePic(e.target.files[0])\n    }\n    \n    const handlePassword = (e) => {\n        setPassword(e.target.value)\n    }\n    \n    const handleUsername = (e) => {\n        setUserName(e.target.value)\n    }\n    \n    const handleEmailChange = (e) => {\n        setEmail(e.target.value)\n    }\n    \n    const SaveProfileDetails = () => {\n        const data = new FormData();\n        data.append(\"file\", profilePic);\n        data.append(\"upload_preset\", \"AjayUi\");\n        data.append(\"cloud_name\", \"AjayUi\");\n        fetch(\"https://api.cloudinary.com/v1_1/ajaui/image/upload\", {\n            method: \"post\",\n            body: data\n        })\n            .then(res => res.json())\n            .then(data => fetch(`${API_URL}/auth/editProfile/${props.jwtToken.userDetails.user._id}`, {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        name: username,\n                        email: email,\n                        password: password,\n                        photo: data.url\n                    }),\n                    headers: {\n                        \"Accept\": \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                    }\n                }).then(res => res.json())\n                    .then(data => console.log(data, 'final data'))\n            )\n    }\n    \n    return (\n        <div>\n            {open ? <Dialog\n                open={open}\n                TransitionComponent={Transition}\n                onClose={handleClose}\n                aria-labelledby=\"alert-dialog-slide-title\"\n                aria-describedby=\"alert-dialog-slide-description\"\n            >\n                <DialogTitle id=\"alert-dialog-slide-title\">{\"Edit your profile\"}</DialogTitle>\n                <DialogContent>\n                    <div style={{minWidth: '400px'}}>\n                        <TextField style={{width: '100%'}} id=\"standard-basic\" label=\"name\" value={username}\n                                   onChange={handleUsername}/>\n                    </div>\n            \n                    <div style={{minWidth: '400px'}}>\n                        <TextField style={{width: '100%'}} id=\"standard-basic\" label=\"email\" value={email}\n                                   onChange={handleEmailChange}/>\n                    </div>\n            \n                    <div style={{minWidth: '400px'}}>\n                        <TextField style={{width: '100%'}} id=\"standard-basic\" label=\"Password\" value={password}\n                                   onChange={handlePassword}\n                                   type='password'/>\n                    </div>\n            \n                    <div style={{padding: \"20px\", marginTop: \"2%\"}}>\n                        <input id=\"files\" className=\"Input\" type=\"file\" onChange={(e) => handlePhotoChange(e)}/>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        cancel\n                    </Button>\n                    <Button onClick={SaveProfileDetails} color=\"primary\">\n                        Save\n                    </Button>\n                </DialogActions>\n            </Dialog> : null}\n            \n            <SNLandingPage/>\n            <Grid container spacing={3}>\n                <Grid item xs={2}>\n                </Grid>\n                \n                \n                <Grid item xs={8}>\n                    <div className=\"profileHeader\">\n                        <div className=\"thumbnail\">\n                            <Grid container spacing={3}>\n                                <Grid item xs={3}>\n                                    <div className=\"thumbnailDiv\">\n                                        <img\n                                            src={myPostsData && myPostsData.posts[0].postedBy.photo}\n                                            className=\"thumbnailDiv\"/>\n                                    </div>\n                                </Grid>\n                                \n                                <Grid item xs={9}>\n                                    <div className=\"profileStats\">\n                                        <h3 className=\"profileName\">{myPostsData && myPostsData.posts[0].postedBy.name}</h3>\n                                        <Button\n                                            style={{\n                                                marginTop: \"5%\",\n                                                float: \"right\",\n                                                width: \"200px\",\n                                                height: \"50px\",\n                                                marginLeft: \"2%\"\n                                            }}\n                                            variant=\"contained\"\n                                            className={classes.button}\n                                            startIcon={<EditIcon/>}\n                                            onClick={handleEditProfile}\n                                        >\n                                            <span style={{width: \"200px\"}}>Edit Profile</span>\n                                        </Button>\n                                    </div>\n                                    <Grid container spacing={3} style={{textAlign: \"left\", width: \"50%\"}}>\n                                        <Grid item xs={4} className=\"subHeaders\">Posts</Grid>\n                                        \n                                        <Grid item xs={4} className=\"subHeaders\">Followers</Grid>\n                                        \n                                        <Grid item xs={4} className=\"subHeaders\">Following</Grid>\n                                    </Grid>\n                                    \n                                    <Grid container spacing={3} style={{textAlign: \"left\", width: \"50%\"}}>\n                                        <Grid item xs={4}\n                                              className=\"subHeadersValues\">{myPostsData && myPostsData.posts.length}</Grid>\n                                        \n                                        <Grid item xs={4} className=\"subHeadersValues\">120</Grid>\n                                        \n                                        <Grid item xs={4} className=\"subHeadersValues\">3</Grid>\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                        </div>\n                    </div>\n                    \n                    <Grid container spacing={3} style={{marginTop: \"3%\", backgroundColor: \"#dae8e2\"}}>\n                        {myPostsData && myPostsData.posts.map((post, index) => {\n                            return <Grid key={index} item xs={4}>\n                                <img style={{padding: \"20px\", width: \"300px\", height: \"300px\"}} src={post.photo}/>\n                            </Grid>\n                        })}\n                    \n                    </Grid>\n                </Grid>\n                \n                <Grid item xs={2}>\n                \n                </Grid>\n            \n            </Grid>\n        </div>\n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        jwtToken: state.accessToken\n    }\n}\n\nexport default connect(mapStateToProps)(Profile)\n\n"]},"metadata":{},"sourceType":"module"}