{"ast":null,"code":"import _slicedToArray from\"/Users/ajaykiranreddy/react/heroku/Server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{makeStyles}from'@material-ui/core/styles';import clsx from'clsx';import Card from'@material-ui/core/Card';import CardMedia from'@material-ui/core/CardMedia';import CardContent from'@material-ui/core/CardContent';import CardActions from'@material-ui/core/CardActions';import Avatar from'@material-ui/core/Avatar';import IconButton from'@material-ui/core/IconButton';import Typography from'@material-ui/core/Typography';import{red}from'@material-ui/core/colors';import FavoriteIcon from'@material-ui/icons/Favorite';import ShareIcon from'@material-ui/icons/Share';import{API_URL}from\"../../../reduxModules/constants\";import{connect}from\"react-redux\";import SNLandingPage from\"./SNLandingPage\";import{Grid}from\"@material-ui/core\";import TextField from\"@material-ui/core/TextField\";import SendIcon from'@material-ui/icons/Send';import DeleteOutlineIcon from'@material-ui/icons/DeleteOutline';import{storeUserProfile as _storeUserProfile}from\"../../../reduxModules/actions\";import history from\"../../../utils/history\";import{trackPromise}from\"react-promise-tracker\";var useStyles=makeStyles(function(theme){return{root:{padding:\"20px\",marginTop:\"4%\",width:\"100%\",MuiCardHeader:{title:{float:\"left\"}}},media:{height:0,paddingTop:'56.25%'// 16:9\n},expand:{transform:'rotate(0deg)',marginLeft:'auto',transition:theme.transitions.create('transform',{duration:theme.transitions.duration.shortest})},expandOpen:{transform:'rotate(180deg)'},avatar:{backgroundColor:red[500]}};});function PostCard(props){var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),expanded=_React$useState2[0],setExpanded=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),postsData=_React$useState4[0],setPostsData=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),updatePostData=_React$useState6[0],setUpdatePostData=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),comment=_React$useState8[0],updateComment=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),commentData=_React$useState10[0],setCommentData=_React$useState10[1];React.useEffect(function(){trackPromise(fetch(API_URL+\"/post/allposts\",{method:\"GET\",headers:{\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}})).then(function(res){return res.json();}).then(function(data){return setPostsData(data.posts);});},[updatePostData]);var handleLikeClick=function handleLikeClick(id){fetch(API_URL+\"/post/like\",{method:\"PUT\",body:JSON.stringify({postId:id}),headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(){return setUpdatePostData(!updatePostData);});};var handleUnLikeClick=function handleUnLikeClick(id){fetch(API_URL+\"/post/unlike\",{method:\"PUT\",body:JSON.stringify({postId:id}),headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(){return setUpdatePostData(!updatePostData);});};var handleCommentChange=function handleCommentChange(e){updateComment(e.target.value);};var updateComments=function updateComments(id){fetch(API_URL+\"/post/comment\",{method:\"PUT\",body:JSON.stringify({comment:comment,postId:id}),headers:{\"Content-type\":\"application/json\",\"Accept\":\"application/json\",\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(data){return setCommentData(data.result.comment);}).then(function(){return updateComment(\"\");}).finally(function(){return setUpdatePostData(!updatePostData);});};var deleteComment=function deleteComment(postId,commentId){fetch(API_URL+\"/post/\".concat(postId,\"/\").concat(commentId),{method:\"DELETE\",headers:{\"Accept\":\"application/json\",\"Content-type\":\"application/json\",\"Authorization\":props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(data){return console.log(data,'deleted data');}).finally(function(){return setUpdatePostData(!updatePostData);});};var deletePost=function deletePost(postId){fetch(API_URL+\"/post/deletePost/\".concat(postId),{method:\"DELETE\",headers:{\"Accept\":\"application/json\",\"content-type\":\"application/json\",\"Authorization\":props.jwtToken.userDetails.accessToken}}).then(function(res){return res.json();}).then(function(data){return console.log(data);}).catch(function(err){return console.log(err);});};var routeToUserProfile=function routeToUserProfile(userId){props.storeUserProfile(userId);history.push('/UserProfile');};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SNLandingPage,null),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},postsData.map(function(post,index){return/*#__PURE__*/React.createElement(Card,{className:classes.root,key:index},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3,style:{padding:\"20px\"}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:1},/*#__PURE__*/React.createElement(Avatar,null)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3,style:{textAlign:\"left\",marginTop:\"10px\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"userName\",onClick:function onClick(){return routeToUserProfile(post.postedBy._id);}},post.postedBy.name)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:7}),post.postedBy._id===props.jwtToken.userDetails.user._id?/*#__PURE__*/React.createElement(Grid,{item:true,xs:1},/*#__PURE__*/React.createElement(DeleteOutlineIcon,{style:{fill:\"red\"},onClick:function onClick(){return deletePost(post._id);}})):/*#__PURE__*/React.createElement(Grid,{item:true,xs:1})),/*#__PURE__*/React.createElement(CardMedia,{className:classes.media,image:post.photo,title:post.title}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\"},post.description)),/*#__PURE__*/React.createElement(CardActions,{disableSpacing:true},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"add to favorites\"},post.likes.includes(props.jwtToken.userDetails.user._id)?/*#__PURE__*/React.createElement(FavoriteIcon,{style:{fill:\"#dd0c0c\"},onClick:function onClick(){return handleUnLikeClick(post._id);}}):/*#__PURE__*/React.createElement(FavoriteIcon,{onClick:function onClick(){return handleLikeClick(post._id);}}),\" \",/*#__PURE__*/React.createElement(\"span\",null,post.likes.length,\" Likes\")),/*#__PURE__*/React.createElement(TextField,{required:true,style:{width:'100%'},id:\"standard-basic\",label:\"Write Comment\",value:comment,onChange:handleCommentChange}),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"share\"},/*#__PURE__*/React.createElement(SendIcon,{onClick:function onClick(){return updateComments(post._id);}}))),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},post.comment.map(function(comment){return/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\",fontSize:\"18px\",display:\"flex\",width:\"100%\",textAlign:\"initial\",float:\"left\"}},/*#__PURE__*/React.createElement(\"span\",{style:{width:\"90%\"}},comment.postedBy.name,\" : \",comment.text,\" \"),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{textAlign:\"end\"}},/*#__PURE__*/React.createElement(DeleteOutlineIcon,{onClick:function onClick(){return deleteComment(post._id,comment._id);},style:{cursor:\"pointer\"}}),\" \")));})));})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3})));}function mapStateToProps(state){return{jwtToken:state.accessToken};}var mapDispatchToProps=function mapDispatchToProps(dispatch){return{storeUserProfile:function storeUserProfile(payload){return dispatch(_storeUserProfile(payload));}};};export default connect(mapStateToProps,mapDispatchToProps)(PostCard);","map":{"version":3,"sources":["/Users/ajaykiranreddy/react/heroku/Server/client/src/components/apps/socialNetwork/Posts.jsx"],"names":["React","makeStyles","clsx","Card","CardMedia","CardContent","CardActions","Avatar","IconButton","Typography","red","FavoriteIcon","ShareIcon","API_URL","connect","SNLandingPage","Grid","TextField","SendIcon","DeleteOutlineIcon","storeUserProfile","history","trackPromise","useStyles","theme","root","padding","marginTop","width","MuiCardHeader","title","float","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","PostCard","props","classes","useState","expanded","setExpanded","postsData","setPostsData","updatePostData","setUpdatePostData","comment","updateComment","commentData","setCommentData","useEffect","fetch","method","headers","jwtToken","userDetails","accessToken","then","res","json","data","posts","handleLikeClick","id","body","JSON","stringify","postId","handleUnLikeClick","handleCommentChange","e","target","value","updateComments","result","finally","deleteComment","commentId","console","log","deletePost","catch","err","routeToUserProfile","userId","push","map","post","index","textAlign","postedBy","_id","name","user","fill","photo","description","likes","includes","length","fontWeight","fontSize","display","text","cursor","mapStateToProps","state","mapDispatchToProps","dispatch","payload"],"mappings":"uKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,KAAyB,0BAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,MAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAAQC,GAAR,KAAkB,0BAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,OAAQC,OAAR,KAAsB,iCAAtB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,OAAQC,IAAR,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,kCAA9B,CACA,OAAQC,gBAAgB,GAAhBA,CAAAA,iBAAR,KAA+B,+BAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,OAAQC,YAAR,KAA2B,uBAA3B,CAEA,GAAMC,CAAAA,SAAS,CAAGtB,UAAU,CAAC,SAACuB,KAAD,QAAY,CACrCC,IAAI,CAAE,CACFC,OAAO,CAAE,MADP,CAEFC,SAAS,CAAE,IAFT,CAGFC,KAAK,CAAE,MAHL,CAIFC,aAAa,CAAE,CACXC,KAAK,CAAE,CACHC,KAAK,CAAE,MADJ,CADI,CAJb,CAD+B,CAWrCC,KAAK,CAAE,CACHC,MAAM,CAAE,CADL,CAEHC,UAAU,CAAE,QAAU;AAFnB,CAX8B,CAerCC,MAAM,CAAE,CACJC,SAAS,CAAE,cADP,CAEJC,UAAU,CAAE,MAFR,CAGJC,UAAU,CAAEd,KAAK,CAACe,WAAN,CAAkBC,MAAlB,CAAyB,WAAzB,CAAsC,CAC9CC,QAAQ,CAAEjB,KAAK,CAACe,WAAN,CAAkBE,QAAlB,CAA2BC,QADS,CAAtC,CAHR,CAf6B,CAsBrCC,UAAU,CAAE,CACRP,SAAS,CAAE,gBADH,CAtByB,CAyBrCQ,MAAM,CAAE,CACJC,eAAe,CAAEnC,GAAG,CAAC,GAAD,CADhB,CAzB6B,CAAZ,EAAD,CAA5B,CA8BA,QAASoC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACrB,GAAMC,CAAAA,OAAO,CAAGzB,SAAS,EAAzB,CADqB,oBAEWvB,KAAK,CAACiD,QAAN,CAAe,KAAf,CAFX,oDAEdC,QAFc,qBAEJC,WAFI,0CAGanD,KAAK,CAACiD,QAAN,CAAe,EAAf,CAHb,qDAGdG,SAHc,qBAGHC,YAHG,0CAIuBrD,KAAK,CAACiD,QAAN,CAAe,KAAf,CAJvB,qDAIdK,cAJc,qBAIEC,iBAJF,0CAKYvD,KAAK,CAACiD,QAAN,CAAe,EAAf,CALZ,qDAKdO,OALc,qBAKLC,aALK,0CAMiBzD,KAAK,CAACiD,QAAN,CAAe,EAAf,CANjB,sDAMdS,WANc,sBAMDC,cANC,sBAQrB3D,KAAK,CAAC4D,SAAN,CAAgB,UAAM,CAClBtC,YAAY,CACZuC,KAAK,CAAChD,OAAO,CAAG,gBAAX,CAA6B,CAC9BiD,MAAM,CAAE,KADsB,CAE9BC,OAAO,CAAE,CACL,gBAAiB,UAAYhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WADnD,CAFqB,CAA7B,CADO,CAAZ,CAOKC,IAPL,CAOU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAAAG,IAAI,QAAIjB,CAAAA,YAAY,CAACiB,IAAI,CAACC,KAAN,CAAhB,EARd,EASH,CAVD,CAUG,CAACjB,cAAD,CAVH,EAYA,GAAMkB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,EAAD,CAAQ,CAC5BZ,KAAK,CAAChD,OAAO,CAAG,YAAX,CAAyB,CAC1BiD,MAAM,CAAE,KADkB,CAE1BY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,MAAM,CAAEJ,EADS,CAAf,CAFoB,CAK1BV,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,gBAAiB,UAAYhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WAHnD,CALiB,CAAzB,CAAL,CAUGC,IAVH,CAUQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAVX,EAWKF,IAXL,CAWU,iBAAMZ,CAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAvB,EAXV,EAYH,CAbD,CAeA,GAAMwB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACL,EAAD,CAAQ,CAC9BZ,KAAK,CAAChD,OAAO,CAAG,cAAX,CAA2B,CAC5BiD,MAAM,CAAE,KADoB,CAE5BY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,MAAM,CAAEJ,EADS,CAAf,CAFsB,CAK5BV,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,gBAAiB,UAAYhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WAHnD,CALmB,CAA3B,CAAL,CAUGC,IAVH,CAUQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAVX,EAWKF,IAXL,CAWU,iBAAMZ,CAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAvB,EAXV,EAYH,CAbD,CAeA,GAAMyB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,CAAD,CAAO,CAC/BvB,aAAa,CAACuB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,CACH,CAFD,CAIA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACV,EAAD,CAAQ,CAC3BZ,KAAK,CAAChD,OAAO,CAAG,eAAX,CAA4B,CAC7BiD,MAAM,CAAE,KADqB,CAE7BY,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBpB,OAAO,CAAEA,OADQ,CAEjBqB,MAAM,CAAEJ,EAFS,CAAf,CAFuB,CAM7BV,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,SAAU,kBAFL,CAGL,gBAAiB,UAAYhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WAHnD,CANoB,CAA5B,CAAL,CAWGC,IAXH,CAWQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAXX,EAYKF,IAZL,CAYU,SAAAG,IAAI,QAAIX,CAAAA,cAAc,CAACW,IAAI,CAACc,MAAL,CAAY5B,OAAb,CAAlB,EAZd,EAaKW,IAbL,CAaU,iBAAMV,CAAAA,aAAa,CAAC,EAAD,CAAnB,EAbV,EAcK4B,OAdL,CAca,iBAAM9B,CAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAvB,EAdb,EAeH,CAhBD,CAkBA,GAAMgC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACT,MAAD,CAASU,SAAT,CAAuB,CACzC1B,KAAK,CAAChD,OAAO,iBAAYgE,MAAZ,aAAsBU,SAAtB,CAAR,CAA2C,CAC5CzB,MAAM,CAAE,QADoC,CAE5CC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,gBAAiBhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WAHvC,CAFmC,CAA3C,CAAL,CAOGC,IAPH,CAOQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPX,EAQKF,IARL,CAQU,SAAAG,IAAI,QAAIkB,CAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ,CAAkB,cAAlB,CAAJ,EARd,EASKe,OATL,CASa,iBAAM9B,CAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAvB,EATb,EAUH,CAXD,CAaA,GAAMoC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACb,MAAD,CAAY,CAC3BhB,KAAK,CAAChD,OAAO,4BAAuBgE,MAAvB,CAAR,CAAyC,CAC1Cf,MAAM,CAAE,QADkC,CAE1CC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,gBAAiBhB,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BC,WAHvC,CAFiC,CAAzC,CAAL,CAOGC,IAPH,CAOQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPX,EAQKF,IARL,CAQU,SAAAG,IAAI,QAAIkB,CAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ,CAAJ,EARd,EASKqB,KATL,CASW,SAAAC,GAAG,QAAEJ,CAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAAF,EATd,EAUH,CAXD,CAaA,GAAMC,CAAAA,kBAAkB,CAAC,QAAnBA,CAAAA,kBAAmB,CAACC,MAAD,CAAU,CAC/B/C,KAAK,CAAC3B,gBAAN,CAAuB0E,MAAvB,EACAzE,OAAO,CAAC0E,IAAR,CAAa,cAAb,EACH,CAHD,CAKA,mBACI,4CACI,oBAAC,aAAD,MADJ,cAEI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EACK3C,SAAS,CAAC4C,GAAV,CAAc,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC5B,mBACI,oBAAC,IAAD,EAAM,SAAS,CAAElD,OAAO,CAACvB,IAAzB,CAA+B,GAAG,CAAEyE,KAApC,eACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,KAAK,CAAE,CAACxE,OAAO,CAAE,MAAV,CAAnC,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,eACI,oBAAC,MAAD,MADJ,CADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,CAAkB,KAAK,CAAE,CAACyE,SAAS,CAAE,MAAZ,CAAoBxE,SAAS,CAAE,MAA/B,CAAzB,eACI,4BAAM,SAAS,CAAC,UAAhB,CAA2B,OAAO,CAAE,yBAAIkE,CAAAA,kBAAkB,CAACI,IAAI,CAACG,QAAL,CAAcC,GAAf,CAAtB,EAApC,EAAgFJ,IAAI,CAACG,QAAL,CAAcE,IAA9F,CADJ,CAJJ,cAOI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EAPJ,CASKL,IAAI,CAACG,QAAL,CAAcC,GAAd,GAAsBtD,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BsC,IAA3B,CAAgCF,GAAtD,cAA4D,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,eACzD,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAACG,IAAI,CAAC,KAAN,CAA1B,CACmB,OAAO,CAAE,yBAAId,CAAAA,UAAU,CAACO,IAAI,CAACI,GAAN,CAAd,EAD5B,EADyD,CAA5D,cAIS,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EAbd,CADJ,cAiBI,oBAAC,SAAD,EACI,SAAS,CAAErD,OAAO,CAAChB,KADvB,CAEI,KAAK,CAAEiE,IAAI,CAACQ,KAFhB,CAGI,KAAK,CAAER,IAAI,CAACnE,KAHhB,EAjBJ,cAsBI,oBAAC,WAAD,mBACI,oBAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,KAAK,CAAC,eAAlC,CAAkD,SAAS,CAAC,GAA5D,EACKmE,IAAI,CAACS,WADV,CADJ,CAtBJ,cA2BI,oBAAC,WAAD,EAAa,cAAc,KAA3B,eACI,oBAAC,UAAD,EAAY,aAAW,kBAAvB,EACKT,IAAI,CAACU,KAAL,CAAWC,QAAX,CAAoB7D,KAAK,CAACiB,QAAN,CAAeC,WAAf,CAA2BsC,IAA3B,CAAgCF,GAApD,eACG,oBAAC,YAAD,EAAc,KAAK,CAAE,CAACG,IAAI,CAAE,SAAP,CAArB,CACc,OAAO,CAAE,yBAAM1B,CAAAA,iBAAiB,CAACmB,IAAI,CAACI,GAAN,CAAvB,EADvB,EADH,cAGG,oBAAC,YAAD,EAAc,OAAO,CAAE,yBAAM7B,CAAAA,eAAe,CAACyB,IAAI,CAACI,GAAN,CAArB,EAAvB,EAJR,kBAMM,gCAAOJ,IAAI,CAACU,KAAL,CAAWE,MAAlB,UANN,CADJ,cAUI,oBAAC,SAAD,EAAW,QAAQ,KAAnB,CAAoB,KAAK,CAAE,CAACjF,KAAK,CAAE,MAAR,CAA3B,CAA4C,EAAE,CAAC,gBAA/C,CACW,KAAK,CAAC,eADjB,CAEW,KAAK,CAAE4B,OAFlB,CAGW,QAAQ,CAAEuB,mBAHrB,EAVJ,cAeI,oBAAC,UAAD,EAAY,aAAW,OAAvB,eACI,oBAAC,QAAD,EAAU,OAAO,CAAE,yBAAMI,CAAAA,cAAc,CAACc,IAAI,CAACI,GAAN,CAApB,EAAnB,EADJ,CAfJ,CA3BJ,cA8CI,2BAAK,KAAK,CAAE,CAACzE,KAAK,CAAE,MAAR,CAAZ,EACKqE,IAAI,CAACzC,OAAL,CAAawC,GAAb,CAAiB,SAAAxC,OAAO,CAAI,CACzB,mBACI,2BAAK,KAAK,CAAE,CAAC5B,KAAK,CAAE,MAAR,CAAZ,eACE,4BAAM,KAAK,CAAE,CACTkF,UAAU,CAAE,MADH,CAETC,QAAQ,CAAE,MAFD,CAGTC,OAAO,CAAE,MAHA,CAITpF,KAAK,CAAE,MAJE,CAKTuE,SAAS,CAAE,SALF,CAMTpE,KAAK,CAAE,MANE,CAAb,eAQG,4BACI,KAAK,CAAE,CAACH,KAAK,CAAE,KAAR,CADX,EAC4B4B,OAAO,CAAC4C,QAAR,CAAiBE,IAD7C,OACsD9C,OAAO,CAACyD,IAD9D,KARH,kBAS+E,4BAC3E,KAAK,CAAE,CAACd,SAAS,CAAE,KAAZ,CADoE,eAChD,oBAAC,iBAAD,EAC3B,OAAO,CAAE,yBAAMb,CAAAA,aAAa,CAACW,IAAI,CAACI,GAAN,CAAW7C,OAAO,CAAC6C,GAAnB,CAAnB,EADkB,CAE3B,KAAK,CAAE,CAACa,MAAM,CAAE,SAAT,CAFoB,EADgD,KAT/E,CADF,CADJ,CAmBH,CApBA,CADL,CA9CJ,CADJ,CAwEH,CAzEA,CADL,CAJJ,cAgFI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EAhFJ,CAFJ,CADJ,CA2FH,CAED,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC5B,MAAO,CACHpD,QAAQ,CAAEoD,KAAK,CAAClD,WADb,CAAP,CAGH,CAED,GAAMmD,CAAAA,kBAAkB,CAAC,QAAnBA,CAAAA,kBAAmB,CAACC,QAAD,CAAY,CACjC,MAAM,CACFlG,gBAAgB,CAAC,0BAACmG,OAAD,QAAWD,CAAAA,QAAQ,CAAClG,iBAAgB,CAACmG,OAAD,CAAjB,CAAnB,EADf,CAAN,CAGH,CAJD,CAMA,cAAezG,CAAAA,OAAO,CAACqG,eAAD,CAAiBE,kBAAjB,CAAP,CAA4CvE,QAA5C,CAAf","sourcesContent":["import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport {red} from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport {API_URL} from \"../../../reduxModules/constants\";\nimport {connect} from \"react-redux\";\nimport SNLandingPage from \"./SNLandingPage\";\nimport {Grid} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport SendIcon from '@material-ui/icons/Send';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport {storeUserProfile} from \"../../../reduxModules/actions\";\nimport history from \"../../../utils/history\";\nimport {trackPromise} from \"react-promise-tracker\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: \"20px\",\n        marginTop: \"4%\",\n        width: \"100%\",\n        MuiCardHeader: {\n            title: {\n                float: \"left\"\n            }\n        }\n    },\n    media: {\n        height: 0,\n        paddingTop: '56.25%', // 16:9\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    avatar: {\n        backgroundColor: red[500],\n    },\n}));\n\nfunction PostCard(props) {\n    const classes = useStyles();\n    const [expanded, setExpanded] = React.useState(false);\n    const [postsData, setPostsData] = React.useState([]);\n    const [updatePostData, setUpdatePostData] = React.useState(false);\n    const [comment, updateComment] = React.useState(\"\");\n    const [commentData, setCommentData] = React.useState([]);\n    \n    React.useEffect(() => {\n        trackPromise(\n        fetch(API_URL + \"/post/allposts\", {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n            }\n        }))\n            .then(res => res.json())\n            .then(data => setPostsData(data.posts))\n    }, [updatePostData])\n    \n    const handleLikeClick = (id) => {\n        fetch(API_URL + \"/post/like\", {\n            method: \"PUT\",\n            body: JSON.stringify({\n                postId: id\n            }),\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(() => setUpdatePostData(!updatePostData))\n    }\n    \n    const handleUnLikeClick = (id) => {\n        fetch(API_URL + \"/post/unlike\", {\n            method: \"PUT\",\n            body: JSON.stringify({\n                postId: id\n            }),\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(() => setUpdatePostData(!updatePostData))\n    }\n    \n    const handleCommentChange = (e) => {\n        updateComment(e.target.value)\n    }\n    \n    const updateComments = (id) => {\n        fetch(API_URL + \"/post/comment\", {\n            method: \"PUT\",\n            body: JSON.stringify({\n                comment: comment,\n                postId: id\n            }),\n            headers: {\n                \"Content-type\": \"application/json\",\n                \"Accept\": \"application/json\",\n                \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(data => setCommentData(data.result.comment))\n            .then(() => updateComment(\"\"))\n            .finally(() => setUpdatePostData(!updatePostData))\n    }\n    \n    const deleteComment = (postId, commentId) => {\n        fetch(API_URL + `/post/${postId}/${commentId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-type\": \"application/json\",\n                \"Authorization\": props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(data => console.log(data, 'deleted data'))\n            .finally(() => setUpdatePostData(!updatePostData))\n    }\n    \n    const deletePost = (postId) => {\n        fetch(API_URL + `/post/deletePost/${postId}`, {\n            method: \"DELETE\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"content-type\": \"application/json\",\n                \"Authorization\": props.jwtToken.userDetails.accessToken\n            }\n        }).then(res => res.json())\n            .then(data => console.log(data))\n            .catch(err=>console.log(err))\n    }\n    \n    const routeToUserProfile=(userId)=>{\n        props.storeUserProfile(userId);\n        history.push('/UserProfile')\n    }\n    \n    return (\n        <div>\n            <SNLandingPage/>\n            <Grid container spacing={3}>\n                <Grid item xs={3}>\n                \n                </Grid>\n                <Grid item xs={6}>\n                    {postsData.map((post, index) => {\n                        return (\n                            <Card className={classes.root} key={index}>\n                                <Grid container spacing={3} style={{padding: \"20px\"}}>\n                                    <Grid item xs={1}>\n                                        <Avatar/>\n                                    </Grid>\n                                    <Grid item xs={3} style={{textAlign: \"left\", marginTop: \"10px\"}}>\n                                        <span className=\"userName\" onClick={()=>routeToUserProfile(post.postedBy._id)}>{post.postedBy.name}</span>\n                                    </Grid>\n                                    <Grid item xs={7}>\n                                    </Grid>\n                                    {post.postedBy._id === props.jwtToken.userDetails.user._id ? <Grid item xs={1}>\n                                        <DeleteOutlineIcon style={{fill:\"red\"}}\n                                                           onClick={()=>deletePost(post._id)}\n                                        />\n                                    </Grid> : <Grid item xs={1}></Grid>}\n                                    \n                                </Grid>\n                                <CardMedia\n                                    className={classes.media}\n                                    image={post.photo}\n                                    title={post.title}\n                                />\n                                <CardContent>\n                                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                        {post.description}\n                                    </Typography>\n                                </CardContent>\n                                <CardActions disableSpacing>\n                                    <IconButton aria-label=\"add to favorites\">\n                                        {post.likes.includes(props.jwtToken.userDetails.user._id) ?\n                                            <FavoriteIcon style={{fill: \"#dd0c0c\"}}\n                                                          onClick={() => handleUnLikeClick(post._id)}/> :\n                                            <FavoriteIcon onClick={() => handleLikeClick(post._id)}/>\n                                            \n                                        } <span>{post.likes.length} Likes</span>\n                                    </IconButton>\n                                    \n                                    <TextField required style={{width: '100%'}} id=\"standard-basic\"\n                                               label=\"Write Comment\"\n                                               value={comment}\n                                               onChange={handleCommentChange}\n                                    />\n                                    <IconButton aria-label=\"share\">\n                                        <SendIcon onClick={() => updateComments(post._id)}/>\n                                    </IconButton>\n                                </CardActions>\n                                <div style={{width: \"100%\"}}>\n                                    {post.comment.map(comment => {\n                                        return (\n                                            <div style={{width: \"100%\"}}>\n                                              <span style={{\n                                                  fontWeight: \"bold\",\n                                                  fontSize: \"18px\",\n                                                  display: \"flex\",\n                                                  width: \"100%\",\n                                                  textAlign: \"initial\",\n                                                  float: \"left\"\n                                              }}>\n                                                 <span\n                                                     style={{width: \"90%\"}}>{comment.postedBy.name} : {comment.text} </span> <span\n                                                  style={{textAlign: \"end\"}}><DeleteOutlineIcon\n                                                  onClick={() => deleteComment(post._id, comment._id)}\n                                                  style={{cursor: \"pointer\"}}/> </span>\n                                            </span>\n                                            \n                                            </div>\n                                        )\n                                    })}\n                                </div>\n                            </Card>\n                        )\n                    })}\n                </Grid>\n                <Grid item xs={3}>\n                </Grid>\n            </Grid>\n        \n        \n        </div>\n    \n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        jwtToken: state.accessToken\n    }\n}\n\nconst mapDispatchToProps=(dispatch)=>{\n    return{\n        storeUserProfile:(payload)=>dispatch(storeUserProfile(payload))\n    }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(PostCard)\n"]},"metadata":{},"sourceType":"module"}