{"ast":null,"code":"import _slicedToArray from\"/Users/ajaykiranreddy/react/heroku/Server/ajaui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import\"./snstyle.css\";import{connect}from\"react-redux\";import history from\"../../../utils/history\";import SnLandingPage from\"./SNLandingPage\";function CreatePost(props){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),title=_React$useState2[0],setTitle=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),photo=_React$useState6[0],setPhoto=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),photoUrl=_React$useState8[0],setPhotoUrl=_React$useState8[1];var handleTitleChange=function handleTitleChange(e){setTitle(e.target.value);};var handleDescriptionChange=function handleDescriptionChange(e){setDescription(e.target.value);};var handlePhotoUpload=function handlePhotoUpload(e){setPhoto(e.target.files[0]);};var submitPost=function submitPost(){var postObject={};var data=new FormData();data.append(\"file\",photo);data.append(\"upload_preset\",\"AjayUi\");data.append(\"cloud_name\",\"AjayUi\");fetch(\"https://api.cloudinary.com/v1_1/ajaui/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){return fetch(\"http://localhost:5000/post/createPost\",{method:\"POST\",body:JSON.stringify({title:title,description:description,photo:data.url}),headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+props.jwtToken.userDetails.accessToken}});}).then(function(res){return res.json;}).then(function(data){return console.log(data);}).catch(function(err){return console.log(err);}).finally(function(){return history.push(\"/social\");});};return/*#__PURE__*/React.createElement(\"div\",{className:\"postParent\"},/*#__PURE__*/React.createElement(SnLandingPage,null),/*#__PURE__*/React.createElement(\"div\",{className:\"createPost\"},/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:'400px'}},/*#__PURE__*/React.createElement(TextField,{required:true,style:{width:'100%'},id:\"standard-basic\",label:\"title\",value:title,onChange:handleTitleChange})),/*#__PURE__*/React.createElement(\"div\",{style:{minWidth:'400px'}},/*#__PURE__*/React.createElement(TextField,{required:true,style:{width:'100%'},id:\"standard-basic\",label:\"description\",value:description,onChange:handleDescriptionChange})),/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"20px\",marginTop:\"2%\"}},/*#__PURE__*/React.createElement(\"input\",{id:\"files\",className:\"Input\",type:\"file\",onChange:function onChange(e){return handlePhotoUpload(e);}})),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:submitPost},\"Submit\")));}function mapStateToProps(state){return{jwtToken:state.accessToken};}export default connect(mapStateToProps,null)(CreatePost);","map":{"version":3,"sources":["/Users/ajaykiranreddy/react/heroku/Server/ajaui/src/components/apps/socialNetwork/CreatePost.jsx"],"names":["React","TextField","Button","connect","history","SnLandingPage","CreatePost","props","useState","title","setTitle","description","setDescription","photo","setPhoto","photoUrl","setPhotoUrl","handleTitleChange","e","target","value","handleDescriptionChange","handlePhotoUpload","files","submitPost","postObject","data","FormData","append","fetch","method","body","then","res","json","JSON","stringify","url","headers","jwtToken","userDetails","accessToken","console","log","catch","err","finally","push","minWidth","width","padding","marginTop","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport \"./snstyle.css\";\nimport {connect} from \"react-redux\";\nimport history from \"../../../utils/history\";\nimport SnLandingPage from \"./SNLandingPage\";\n\nCreatePost.propTypes = {};\n\nfunction CreatePost(props) {\n    \n    const [title, setTitle] = React.useState('');\n    const [description, setDescription] = React.useState('');\n    const [photo, setPhoto] = React.useState('');\n    const [photoUrl, setPhotoUrl] = React.useState('');\n    \n    const handleTitleChange = (e) => {\n        setTitle(e.target.value)\n    };\n    \n    const handleDescriptionChange = (e) => {\n        setDescription(e.target.value)\n    };\n    \n    const handlePhotoUpload = (e) => {\n        setPhoto(e.target.files[0])\n    }\n    \n    const submitPost = () => {\n        const postObject = {}\n        const data = new FormData();\n        data.append(\"file\", photo);\n        data.append(\"upload_preset\", \"AjayUi\");\n        data.append(\"cloud_name\", \"AjayUi\");\n        fetch(\"https://api.cloudinary.com/v1_1/ajaui/image/upload\", {\n            method: \"post\",\n            body: data\n        })\n            .then(res => res.json())\n            .then((data) => fetch(\"http://localhost:5000/post/createPost\", {\n                method: \"POST\",\n                body: JSON.stringify({\n                    title,\n                    description,\n                    photo: data.url\n                }),\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": \"Bearer \" + props.jwtToken.userDetails.accessToken\n                    \n                }\n            }))\n            .then((res) => res.json)\n            .then(data => console.log(data))\n            .catch(err => console.log(err))\n            .finally(()=>history.push(\"/social\"))\n    }\n    \n    return (\n        <div className=\"postParent\">\n            <SnLandingPage/>\n            <div className=\"createPost\">\n                <div style={{minWidth: '400px'}}>\n                    <TextField required style={{width: '100%'}} id=\"standard-basic\" label=\"title\"\n                               value={title}\n                               onChange={handleTitleChange}\n                    />\n                </div>\n                \n                <div style={{minWidth: '400px'}}>\n                    <TextField required style={{width: '100%'}} id=\"standard-basic\" label=\"description\"\n                               value={description}\n                               onChange={handleDescriptionChange}\n                              />\n                </div>\n                \n                <div style={{padding: \"20px\", marginTop: \"2%\"}}>\n                    <input id=\"files\" className=\"Input\" type=\"file\" onChange={(e) => handlePhotoUpload(e)}/>\n                </div>\n                \n                \n                <Button variant=\"contained\" color=\"secondary\"\n                        onClick={submitPost}\n                >\n                    Submit\n                </Button>\n            </div>\n        </div>\n    \n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        jwtToken: state.accessToken\n    }\n}\n\nexport default connect(mapStateToProps, null)(CreatePost);"]},"metadata":{},"sourceType":"module"}